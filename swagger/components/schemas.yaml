# Updated schemas.yaml
# Data models for the API
Error:
  type: object
  properties:
    code:
      type: string
      description: Error code
      example: VALIDATION_ERROR
      enum:
        - VALIDATION_ERROR
        - INVALID_TOKEN
        - INVALID_SIGNATURE
        - CUSTOMER_NOT_FOUND
        - DUPLICATE_JTI
        - INVALID_JTI
        - EXPIRED_TOKEN
    message:
      type: string
      description: Human-readable error message
  required:
    - code
    - message

LicenseUpdateRequest:
  type: object
  properties:
    ccId:
      type: object
      description: Customer identifiers
      properties:
        id:
          type: string
          description: Customer identifier
          example: EXAMPLECUSTOMERID
        divisionId:
          type: string
          description: Division identifier
          example: EXAMPLEDIVISIONID
      required:
        - id
        - divisionId
    digitalOnlySeats:
      type: integer
      minimum: 0
      description: Number of Digital Only tier seats
      example: 10
    essentialSeats:
      type: integer
      minimum: 0
      description: Number of Essential tier seats
      example: 10
    professionalSeats:
      type: integer
      minimum: 0
      description: Number of Professional tier seats
      example: 10
    eliteSeats:
      type: integer
      minimum: 0
      description: Number of Elite tier seats
      example: 10
    workforceOptimizationSeats:
      type: integer
      minimum: 10
      description: Number of Workforce Optimization seats (minimum 10)
      example: 10
    workforceManagementSeats:
      type: integer
      minimum: 10
      description: Number of Workforce Management seats (minimum 10)
      example: 10
    speechAnalyticsSeats:
      type: integer
      minimum: 5
      description: Number of Speech Analytics seats (minimum 5)
      example: 5
    dialerSeats:
      type: integer
      minimum: 5
      description: Number of Dialer seats (minimum 5)
      example: 5
    additionalAiMessages:
      type: integer
      minimum: 0
      description: Additional AI messages. Requires at least one Elite seat.
      example: 5000
    aiMessaging:
      type: object
      description: |
        AI Messaging options. Professional and Elite seats include a base number of AI messages per agent. Use additionalMessageBundles to purchase more (each bundle = 1000 messages).
      properties:
        additionalMessageBundles:
          type: integer
          minimum: 0
          description: Number of additional AI message bundles (each bundle = 1000 messages)
          example: 5
      required:
        - additionalMessageBundles
    aiAudioServices:
      type: object
      description: |
        AI Audio Services options. Professional and Elite seats include a base number of AI audio hours per agent. Use additionalHours to purchase more.
      properties:
        additionalHours:
          type: integer
          minimum: 0
          description: Number of additional AI audio hours
          example: 20
      required:
        - additionalHours
    ehrEmrIntegrationSeats:
      type: integer
      minimum: 0
      description: Number of EHR/EMR integration seats
      example: 10
    sipCredentials:
      type: object
      description: |
        SIP credentials for registering a SIP client to an upstream register trunk. Optional. Only include if SIP registration is required.
      properties:
        username:
          type: string
          description: SIP username for registration
          example: "user123"
        password:
          type: string
          description: SIP password for registration
          example: "secret"
        domain:
          type: string
          description: SIP domain/realm
          example: "sip.example.com"
        proxy:
          type: string
          description: SIP proxy server (optional)
          example: "proxy.example.com"
        register:
          type: boolean
          description: Whether to register this client
          example: true
        authUser:
          type: string
          description: Authentication username if different from username (optional)
          example: "authuser123"
        outboundProxy:
          type: string
          description: Outbound proxy server (optional)
          example: "outbound.example.com"
      required:
        - username
        - password
        - domain
        - register
  required:
    - ccId
    - digitalOnlySeats
    - essentialSeats
    - professionalSeats
    - eliteSeats
    - workforceOptimizationSeats
    - workforceManagementSeats
    - speechAnalyticsSeats
    - dialerSeats
    - additionalAiMessages
    - aiMessaging
    - aiAudioServices
    - ehrEmrIntegrationSeats

LicenseUpdateResponse:
  type: object
  properties:
    ccId:
      type: object
      description: Customer identifiers
      properties:
        id:
          type: string
          description: Customer identifier
          example: EXAMPLECUSTOMERID
        divisionId:
          type: string
          description: Division identifier
          example: EXAMPLEDIVISIONID
      required:
        - id
        - divisionId
    changes:
      type: object
      description: Details of the changes made to the license.
      properties:
        digitalOnlySeats:
          $ref: '#/ChangeDetails'
        essentialSeats:
          $ref: '#/ChangeDetails'
        professionalSeats:
          $ref: '#/ChangeDetails'
        eliteSeats:
          $ref: '#/ChangeDetails'
        workforceOptimizationSeats:
          $ref: '#/ChangeDetails'
        workforceManagementSeats:
          $ref: '#/ChangeDetails'
        speechAnalyticsSeats:
          $ref: '#/ChangeDetails'
        dialerSeats:
          $ref: '#/ChangeDetails'
        additionalAiMessages:
          $ref: '#/ChangeDetails'
        aiMessaging:
          type: object
          properties:
            additionalMessageBundles:
              $ref: '#/ChangeDetails'
        aiAudioServices:
          type: object
          properties:
            additionalHours:
              $ref: '#/ChangeDetails'
        ehrEmrIntegrationSeats:
          $ref: '#/ChangeDetails'
        sipCredentials:
          type: object
          description: |
            SIP credentials for registering a SIP client to an upstream register trunk. Optional. Only include if SIP registration is required.
          properties:
            username:
              type: string
              description: SIP username for registration
              example: "user123"
            password:
              type: string
              description: SIP password for registration
              example: "secret"
            domain:
              type: string
              description: SIP domain/realm
              example: "sip.example.com"
            proxy:
              type: string
              description: SIP proxy server (optional)
              example: "proxy.example.com"
            register:
              type: boolean
              description: Whether to register this client
              example: true
            authUser:
              type: string
              description: Authentication username if different from username (optional)
              example: "authuser123"
            outboundProxy:
              type: string
              description: Outbound proxy server (optional)
              example: "outbound.example.com"
          required:
            - username
            - password
            - domain
            - register
  required:
    - ccId
    - changes

ChangeDetails:  # New reusable schema for change details
  type: object
  properties:
    oldValue:
      type: integer
      description: Value before the update.
      example: 10
    newValue:
      type: integer
      description: Value after the update.
      example: 15
  required:
    - oldValue
    - newValue